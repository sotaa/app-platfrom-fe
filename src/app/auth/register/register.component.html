<div class="row">
  <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12 col-lg-offset-4 col-md-offset-3">
    <form (ngSubmit)="submit()" [formGroup]="form">
      <div class="card">
        <div class="card-header" data-background-color="purple">
          <h4 class="text-center" >{{'Register' | translate}}</h4>
        </div>
        <div class="card-content">
        </div>
        <div class="container-fluid">
          <p *ngIf="errorMessage" class="text-danger text-center" >{{ 'authErrors.' + errorMessage | translate}}</p>

          <!-- USERNAME -->
          <div class="form-group label-floating">
            <label class="control-label" >{{'Email' | translate}}</label>
            <input type="email" class="form-control" required name="username" formControlName="username">
            <div *ngIf="form.controls.username.dirty && form.controls.username.errors">

            <span class="text-danger" *ngIf="form.controls.username.errors.email || form.controls.username.errors.required;else serverErrors">
              {{'authErrors.INVALID_USERNAME'| translate}}
            </span>
              <ng-template #serverErrors>
                <span class="text-danger" *ngFor="let error of form.controls.username.errors">
                  {{'authErrors.' + error.message | translate}}
                </span>
              </ng-template>
            </div>
          </div>

          <!-- PASSWORD -->
          <div class="form-group label-floating">
            <label class="control-label" >{{'Password' | translate}}</label>
            <input type="password" class="form-control" required name="password" formControlName="password">
            <div *ngIf="form.controls.password.dirty">
              <span class="text-danger" *ngIf="form.controls.password.errors">
                {{'Password is not valid.' | translate}}
              </span>
            </div>
          </div>

          <!-- HONEY POD -->
          <!-- this field will prevent the bots from submitting the form,
                this field should be empty because it is hidden from user but the bots
                are not able to notice thus they will add some value to it then form will become invalid
          -->
          <div class="form-group label-floating fullname">
            <input type="text" class="form-control" name="fullname" formControlName="fullname" #fn>
          </div>

          <!-- REMEMBER ME -->
          <div class="form-check">
              <label class="form-check-label">
                <input class="form-check-input" type="checkbox" name="remember" formControlName="remember" > {{'Remember Me' | translate}}
                <span class="form-check-sign">
                  <span class="check"></span>
                </span>
              </label>
            </div>

            <!-- POLICIES -->
          <div class="form-check">
              <label class="form-check-label">
                <input class="form-check-input" type="checkbox" name="policyAgreement" formControlName="policyAgreement" >
                {{'I agree with the ' | translate }}
                <span class="form-check-sign">
                  <span class="check"></span>
                </span>
              </label>
              <a [routerLink]="['..','policies']">{{'policies' | translate}}</a>
              <p class="text-danger" *ngIf="form.controls.policyAgreement.dirty && form.controls.policyAgreement.errors">{{'Please agree with the policies.' | translate}}</p>
          </div>


          <!-- SUBMIT -->
          <div class="col-sm-12 text-center">
            <button class="btn btn-primary" [disabled]="isLoading || form.invalid" >{{isLoading ? '...' : 'Register' | translate}}</button>
            <br/>
            <!-- LOGIN PAGE LINK -->
            <a [routerLink]="'../login'" class="btn btn-link text-info text-center" >{{'Already have an account?' | translate}}</a>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
